{{ "<!-- css plugins -->" | safeHTML }}
{{ $cssbootstrap := resources.Get "plugins/bootstrap/bootstrap.min.css" }}
{{ $slick := resources.Get "plugins/slick/slick.css" }}
{{ $themify := resources.Get "plugins/themify-icons/themify-icons.css" }}
{{ $woff := resources.Get "plugins/themify-icons/themify.woff" }}
{{ $woff2 := resources.Get "plugins/themify-icons/themify.woff2" }}
{{ $mainstyle := resources.Get "scss/style.scss" | resources.ToCSS  }}

{{ "<!-- main stylesheet -->" | safeHTML }}
{{ $allcss := slice $cssbootstrap $slick $mainstyle $themify | resources.Concat "/css/vendor.css" | resources.PostCSS (dict "config" "postcss.config.js") | resources.Minify | resources.Fingerprint "sha512" | resources.PostProcess }}
{{- partial "amp-boilerplate.html" . -}}
<style amp-custom>
    @font-face {
        font-family: 'themify';
        src: url("{{ $woff2.RelPermalink }}") format('woff2'),
        url("{{ $woff.RelPermalink }}") format('woff');
        font-weight: 400;
        font-style: normal;
        font-display: block
    }

        {
            {
            $allcss.Content | safeCSS
        }
    }

</style>


{{ "<!-- js plugins -->" | safeHTML }}
<script type="text/javascript" src="https://unpkg.com/default-passive-events"></script>
{{ $jquery := resources.Get "plugins/jQuery/jquery.min.js" }}
{{ $jsbootstrap := resources.Get "plugins/bootstrap/bootstrap.min.js" }}
{{ $slickjs := resources.Get "plugins/slick/slick.min.js" }}
{{ $darkmode := resources.Get "plugins/darkmode/darkmode.1.5.7.min.js" }}
{{ $cookies := resources.Get "plugins/cookies/js.cookie-2.2.1.min.js" }}
{{ $tabs := resources.Get "js/tabs.js" }}
{{ "<!-- bundled js -->" | safeHTML }}
{{ $alljs := slice $jquery $jsbootstrap $slickjs $darkmode $cookies $tabs | resources.Concat "/js/vendor.js" | minify | fingerprint "sha512" }}
<amp-script>
    <script> { { $alljs.Content | safeJS } }</script>
    <script>
        (function ($) {
            const cookieBox = document.getElementById('js-cookie-box');
            const cookieButton = document.getElementById('js-cookie-button');
            if (!Cookies.get('cookie-box')) {
                cookieBox.classList.remove('cookie-box-hide');
                cookieButton.onclick = function () {
                    Cookies.set('cookie-box', true, {
                        expires: {{ site.Params.cookies.expire_days }}
            });
            cookieBox.classList.add('cookie-box-hide');
        };
            }
        }) (jQuery);
    </script>

    {{ "<!-- Darkmode -->" | safeHTML }}
    <script>
        const options = {
            time: '0.65s', // default: '0.3s'
            saveInCookies: true, // default: true,
            label: 'ðŸŒ“', // default: ''
            autoMatchOsTheme: true // default: true
        }
        function addDarkmodeWidget() {
            new Darkmode(options).showWidget();
        }
        window.addEventListener('load', addDarkmodeWidget);
    </script>

    <script>
        const indexURL = {{ "index.json" | absURL }}
    </script>

    {{ "<!-- Main script -->" | safeHTML }}
    {{ $script := resources.Get "js/script.js" | minify | fingerprint "sha512" }}
    <script async defer src="{{ $script.Permalink }}"></script>

    {{ $fusejs := resources.Get "plugins/search/fuse.min.js" }}
    {{ $markjs := resources.Get "plugins/search/mark.js" }}
    {{ $search := resources.Get "plugins/search/search.js" }}
    {{ $searchjs := slice $fusejs $markjs $search | resources.Concat "/js/searchjs.js" | minify | fingerprint "sha512" }}
    <script async defer src="{{ $searchjs.RelPermalink }}"></script>

    {{ $script := resources.Get "js/captcha.js" | js.Build "captcha.js" | minify | fingerprint "sha512"}}
    <script sync src="{{ $script.Permalink }}"></script>

</amp-script>
